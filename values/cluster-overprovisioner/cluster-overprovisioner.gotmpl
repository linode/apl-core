{{- $v := .Values -}}
{{- $o := $v.apps | get "cluster-overprovisioner" dict }}

deployments:
  - name: default
    resources:
      {{- range $type := (list "limits" "requests") }}
      {{ $type }}:
        cpu: {{ $o.cpu }}
        memory: {{ $o.memory }}
      {{- end }}
    annotations:
      policy.otomi.io/ignore: psp-allowed-users

{{- with $v._files | get "otomi.globalPullSecret" nil }}
image:
  pullSecrets:
    - otomi-pullsecret-global
{{- end }}
