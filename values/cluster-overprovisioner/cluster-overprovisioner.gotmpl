{{- $v := .Environment.Values -}}
{{- $o := $v.charts | get "cluster-overprovisioner" dict }}
{{- $defaultCpu := "1000m" }}
{{- $defaultMem := "1000Mi" }}

deployments:
  - name: default
    resources:
      limits:
        cpu: {{ $o | get "cpu" $defaultCpu }}
        memory: {{ $o | get "memory" $defaultMem }}
      requests:
        cpu: {{ $o | get "cpu" $defaultCpu }}
        memory: {{ $o | get "memory" $defaultMem }}
    annotations:
      policies.otomi.io/ignore: pspallowedusers

