{{- $v := .Values }}
{{- $i := $v.apps.istio }}

{{- if $i.tracing.enabled }}
resources:
  - apiVersion: telemetry.istio.io/v1alpha1
    kind: Telemetry
    metadata:
      name: istio-defaults
      namespace: istio-system
    spec:
      tracing:
      - providers:
        - name: otel-tracing
        randomSamplingPercentage: {{ $i.tracing.samplingRatio }}
      accessLogging:
      - providers:
        - name: envoy
{{- end }}