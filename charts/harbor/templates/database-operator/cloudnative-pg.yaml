{{- if eq .Values.database.type "external" -}}
apiVersion: postgresql.cnpg.io/v1
kind: Cluster
metadata:
  name: {{ .Values.database.external.name }}
spec:
  instances: {{ .Values.database.external.instances }}
{{- if .Values.database.external.imageName }}
  imageName: {{ .Values.database.external.imageName }}
{{- end }}
  bootstrap:
    initdb:
      database: {{ .Values.database.external.coreDatabase }}
      owner: {{ .Values.database.external.username }}
      localeCollate: 'en_US.UTF-8'
      localeCType: 'en_US.UTF-8'
  storage:
    size: {{ .Values.database.external.storage.size }}
{{- if .Values.database.external.backupLocation }}
{{ toYaml .Values.database.external.backupLocation | indent 2 }}
{{- end }}
{{- end -}}