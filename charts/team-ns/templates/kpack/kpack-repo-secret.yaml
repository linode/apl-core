{{- $v := .Values }}
{{- $g := $v.apps.gitea }}
{{- range $v.builds }}

{{- if eq .source "otomi-gitea" }}
apiVersion: v1
kind: Secret
metadata:
  name: gitea-user-credentials-{{ .name }}
  annotations:
    kpack.io/git: harbor.{{ $v.cluster.domainSuffix }}
type: kubernetes.io/basic-auth
stringData:
  password: {{ $g.adminPassword }}
  username: {{ $g.adminUsername }}
{{- end }}
{{- if eq .source "github" }}
apiVersion: v1
kind: Secret
metadata:
  name: github-user-credentials-{{ .name }}
  annotations:
    kpack.io/git: {{ .repoUrl }}
type: kubernetes.io/basic-auth
stringData:
  username: {{ .repoUserName }}
  password: {{ .repoPassword }}
{{- end }}
{{- end }}