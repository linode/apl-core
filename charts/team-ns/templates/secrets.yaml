{{- $v := .Values }}
{{- $ := . }}
{{- range $s := $v.secrets }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ $s.name }}
  labels: {{- include "chart-labels" $ | nindent 4 }}
    {{- with $s.labels }}
    {{- . | toYaml | nindent 4 }}
    {{- end }}
{{- if eq $s.type "tls" }}
type: kubernetes.io/tls
data:
  ca.crt: {{ $s.ca | b64enc | quote }}
  tls.crt: {{ $s.crt | b64enc | quote }}
  tls.key: {{ $s.key | b64enc | quote }}
{{- else if eq $s.type "generic" }}
type: Opaque
data:
  {{- range $i := $s.entries }}
  {{ $i.key }}: {{ $i.value | b64enc | quote }}
  {{- end }}
{{- else if eq $s.type "docker-registry" }}
type: kubernetes.io/dockerconfigjson
data:  
  .dockerconfigjson: {{ include "dockercfg" $s | b64enc | quote }}
{{- end }}
---      
{{- end }}
