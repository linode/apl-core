environments:
  default:
    values:
      - azure:
          appgw:
            isManaged: false
        apps:
          alertmanager:
            enabled: false
            resources:
              alertmanager:
                requests:
                  cpu: 10m
                  memory: 64Mi
                limits:
                  cpu: 200m
                  memory: 256Mi
            _rawValues: {}
          argocd:
            controllerStatusProcessors: 20
            controllerOperationProcessors: 10
            applicationSet:
              replicas: 1
            controller:
              replicas: 1
            autoscaling:
              repoServer:
                enabled: true
                minReplicas: 2
                maxReplicas: 5
                targetCPUUtilizationPercentage: 80
                targetMemoryUtilizationPercentage: 80
              server:
                enabled: true
                minReplicas: 1
                maxReplicas: 5
                targetCPUUtilizationPercentage: 80
                targetMemoryUtilizationPercentage: 80
            resources:
              controller:
                requests:
                  cpu: 200m
                  memory: 1Gi
                limits:
                  cpu: "2"
                  memory: 4Gi
              server:
                requests:
                  cpu: 100m
                  memory: 512Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              repo:
                requests:
                  cpu: 100m
                  memory: 640Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              redis:
                requests:
                  cpu: 50m
                  memory: 64Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              applicationSet:
                requests:
                  cpu: 100m
                  memory: 256Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              notifications:
                requests:
                  cpu: 50m
                  memory: 160Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              imageUpdater:
                requests:
                  memory: 160Mi
                  cpu: 50m
                limits:
                  memory: 1Gi
                  cpu: "1"
            _rawValues: {}
          cert-manager:
            issuer: custom-ca
            resources:
              certManager:
                requests:
                  cpu: 50m
                  memory: 128Mi
                limits:
                  cpu: "1"
                  memory: 512Mi
              startupapicheck:
                requests:
                  cpu: 50m
                  memory: 64Mi
                limits:
                  cpu: 200m
                  memory: 384Mi
              cainjector:
                requests:
                  cpu: 50m
                  memory: 384Mi
                limits:
                  cpu: 200m
                  memory: 1Gi
              webhook:
                requests:
                  cpu: 50m
                  memory: 64Mi
                limits:
                  cpu: 100m
                  memory: 256Mi
            _rawValues: {}
          cnpg:
            resources:
              requests:
                cpu: 50m
                memory: 144Mi
              limits:
                cpu: "1"
                memory: 1Gi
            barmanPluginResources:
              requests:
                cpu: 100m
                memory: 100Mi
              limits:
                cpu: 100m
                memory: 200Mi
            useBackupPlugin: false
            _rawValues: {}
          external-dns:
            logLevel: info
            resources:
              limits:
                cpu: 100m
                memory: 128Mi
              requests:
                memory: 64Mi
                cpu: 10m
          gitea:
            adminUsername: otomi-admin
            _rawValues: {}
            networkPolicies:
              enabled: true
            database:
              maxConnections: 28
              maxIdleConnections: 6
            resources:
              gitea:
                limits:
                  cpu: "1"
                  memory: 1Gi
                requests:
                  cpu: 100m
                  memory: 256Mi
              init:
                limits:
                  cpu: 400m
                  memory: 256Mi
                requests:
                  cpu: 100m
                  memory: 128Mi
          grafana:
            enabled: false
            resources:
              grafana:
                requests:
                  cpu: 10m
                  memory: 128Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              sidecar:
                limits:
                  cpu: 500m
                  memory: 256Mi
                requests:
                  cpu: 10m
                  memory: 128Mi
            _rawValues: {}
          harbor:
            enabled: false
            oidcAutoOnboard: true
            oidcUserClaim: email
            registry:
              credentials:
                username: otomi-admin
            database:
              maxConnections: 28
              maxIdleConnections: 6
            resources:
              core:
                requests:
                  cpu: 20m
                  memory: 128Mi
                limits:
                  cpu: 500m
                  memory: 512Mi
              jobservice:
                requests:
                  cpu: 20m
                  memory: 128Mi
                limits:
                  cpu: 500m
                  memory: 512Mi
              portal:
                requests:
                  cpu: 20m
                  memory: 128Mi
                limits:
                  cpu: 500m
                  memory: 512Mi
              redis:
                requests:
                  cpu: 20m
                  memory: 128Mi
                limits:
                  cpu: 500m
                  memory: 512Mi
              registry:
                requests:
                  cpu: 20m
                  memory: 32Mi
                limits:
                  cpu: 500m
                  memory: 256Mi
              registryController:
                requests:
                  cpu: 20m
                  memory: 32Mi
                limits:
                  cpu: 500m
                  memory: 512Mi
              trivy:
                requests:
                  cpu: 100m
                  memory: 128Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              nginx:
                requests:
                  memory: 32Mi
                  cpu: 20m
                limits:
                  memory: 512Mi
                  cpu: 200m
            _rawValues: {}
          istio:
            tracing:
              enabled: false
              samplingRatio: "0.01"
            autoscaling:
              egressgateway:
                minReplicas: 2
                maxReplicas: 10
              ingressgateway:
                minReplicas: 2
                maxReplicas: 10
              pilot:
                minReplicas: 2
                maxReplicas: 10
            egressGateway:
              enabled: false
            resources:
              operator:
                limits:
                  cpu: 200m
                  memory: 256Mi
                requests:
                  cpu: 20m
                  memory: 128Mi
              proxy:
                requests:
                  cpu: 5m
                  memory: 80Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              egressgateway:
                requests:
                  cpu: 100m
                  memory: 128Mi
                limits:
                  cpu: "1"
                  memory: 256Mi
              ingressgateway:
                requests:
                  cpu: 100m
                  memory: 128Mi
                limits:
                  cpu: "1"
                  memory: 256Mi
              pilot:
                requests:
                  cpu: 100m
                  memory: 192Mi
                limits:
                  cpu: "2"
                  memory: 2Gi
            _rawValues: {}
          jaeger:
            enabled: false
            resources:
              operator:
                limits:
                  cpu: 500m
                  memory: 1Gi
                requests:
                  cpu: 100m
                  memory: 128Mi
              jaeger:
                limits:
                  cpu: "1"
                  memory: 2Gi
                requests:
                  cpu: 200m
                  memory: 384Mi
            _rawValues: {}
          keycloak:
            adminUsername: otomi-admin
            theme: otomi
            databaseMaxConnections: 28
            databaseMinConnections: 5
            databaseInitialConnections: 5
            resources:
              keycloak:
                requests:
                  cpu: 100m
                  memory: 640Mi
                limits:
                  cpu: "2"
                  memory: 2Gi
              operator:
                requests:
                  cpu: 100m
                  memory: 336Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
            idp:
              alias: otomi-idp
              clientID: otomi
            _rawValues: {}
          knative:
            enabled: false
            serving:
              replicas: 1
            resources:
              queueSidecar:
                requests:
                  cpu: 25m
                  memory: 64Mi
                limits:
                  cpu: "1"
                  memory: 512Mi
              controller:
                requests:
                  cpu: 50m
                  memory: 64Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              activator:
                requests:
                  cpu: 50m
                  memory: 32Mi
                limits:
                  cpu: 500m
                  memory: 512Mi
              webhook:
                requests:
                  cpu: 50m
                  memory: 32Mi
                limits:
                  cpu: 500m
                  memory: 512Mi
              autoscaler:
                requests:
                  cpu: 50m
                  memory: 64Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              autoscalerHpa:
                requests:
                  cpu: 50m
                  memory: 64Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              operator:
                requests:
                  cpu: 50m
                  memory: 64Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              operatorWebhook:
                requests:
                  cpu: 50m
                  memory: 64Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
          kserve:
            enabled: false
            resources:
              rbacProxy:
                limits:
                  cpu: 100m
                  memory: 300Mi
                requests:
                  cpu: 100m
                  memory: 300Mi
              controller:
                limits:
                  cpu: 100m
                  memory: 300Mi
                requests:
                  cpu: 100m
                  memory: 300Mi
              inferenceService:
                  limits:
                      cpu: "1"
                      memory: "2Gi"
                  requests:
                      cpu: "1"
                      memory: "2Gi"
          kubeflow-pipelines:
            enabled: false
            persistence:
              mysql:
                size: 20Gi
            resources:
              cacheDeployer:
                requests:
                  cpu: 10m
                  memory: 8Mi
                limits:
                  cpu: 100m
                  memory: 32Mi
              cacheServer:
                requests:
                  cpu: 20m
                  memory: 32Mi
                limits:
                  cpu: 100m
                  memory: 64Mi
              metadataEnvoy:
                requests:
                  cpu: 20m
                  memory: 64Mi
                limits:
                  cpu: 100m
                  memory: 128Mi
              metadataGrpc:
                requests:
                  cpu: 20m
                  memory: 8Mi
                limits:
                  cpu: 100m
                  memory: 32Mi
              metadataWriter:
                requests:
                  cpu: 20m
                  memory: 128Mi
                limits:
                  cpu: 100m
                  memory: 256Mi
              mlPipeline:
                requests:
                  cpu: 200m
                  memory: 256Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              mlPipelinePersistenceagent:
                requests:
                  cpu: 20m
                  memory: 16Mi
                limits:
                  cpu: 200m
                  memory: 128Mi
              mlPipelineScheduledworkflow:
                requests:
                  cpu: 20m
                  memory: 32Mi
                limits:
                  cpu: 100m
                  memory: 128Mi
              mlPipelineUi:
                requests:
                  cpu: 20m
                  memory: 128Mi
                limits:
                  cpu: 500m
                  memory: 256Mi
              mlPipelineViewer:
                requests:
                  cpu: 20m
                  memory: 32Mi
                limits:
                  cpu: 200m
                  memory: 128Mi
              mlPipelineVisualizationserver:
                requests:
                  cpu: 20m
                  memory: 128Mi
                limits:
                  cpu: 200m
                  memory: 256Mi
              mysql:
                requests:
                  cpu: 100m
                  memory: 512Mi
                limits:
                  cpu: 500m
                  memory: 1Gi
              workflowController:
                requests:
                  cpu: 20m
                  memory: 32Mi
                limits:
                  cpu: 100m
                  memory: 128Mi
            _rawValues: {}
          kyverno:
            enabled: false
            mode: DevTest
            resources:
              admissionController:
                requests:
                  cpu: 100m
                  memory: 128Mi
                limits:
                  cpu: "1"
                  memory: 512Mi
              cleanupController:
                requests:
                  cpu: 10m
                  memory: 64Mi
                limits:
                  cpu: "1"
                  memory: 512Mi
              backgroundController:
                requests:
                  cpu: 50m
                  memory: 64Mi
                limits:
                  cpu: "1"
                  memory: 512Mi
              reportsController:
                requests:
                  cpu: 50m
                  memory: 128Mi
                limits:
                  cpu: "1"
                  memory: 512Mi
            _rawValues: {}
          linode-cfw:
            enabled: false
            _rawValues: {}
          policy-reporter:
            enabled: false
            resources:
              requests:
                cpu: 100m
                memory: 128Mi
              limits:
                cpu: "1"
                memory: 512Mi
            _rawValues: {}
          tekton:
            resources:
              dashboard:
                limits:
                  cpu: 100m
                  memory: 128Mi
                requests:
                  cpu: 10m
                  memory: 64Mi
              pipelinesController:
                requests:
                  cpu: 100m
                  memory: 128Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              pipelinesRemoteresolver:
                requests:
                  cpu: 100m
                  memory: 128Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              pipelinesEvents:
                requests:
                  cpu: 100m
                  memory: 128Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              pipelinesWebhook:
                requests:
                  cpu: 100m
                  memory: 144Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              triggersInterceptors:
                limits:
                  cpu: 500m
                  memory: 256Mi
                requests:
                  cpu: 50m
                  memory: 64Mi
              triggersController:
                limits:
                  cpu: 500m
                  memory: 256Mi
                requests:
                  cpu: 50m
                  memory: 64Mi
              triggersWebhook:
                limits:
                  cpu: 500m
                  memory: 256Mi
                requests:
                  cpu: 50m
                  memory: 64Mi
            _rawValues: {}
          loki:
            enabled: false
            resources:
              compactor:
                requests:
                  cpu: 50m
                  memory: 128Mi
                limits:
                  cpu: 200m
                  memory: 256Mi
              ingester:
                requests:
                  cpu: 250m
                  memory: 512Mi
                limits:
                  cpu: 500m
                  memory: 1Gi
              gateway:
                requests:
                  cpu: 50m
                  memory: 64Mi
                limits:
                  cpu: 200m
                  memory: 256Mi
              querier:
                requests:
                  cpu: 50m
                  memory: 144Mi
                limits:
                  cpu: 200m
                  memory: 256Mi
              distributor:
                requests:
                  cpu: 150m
                  memory: 128Mi
                limits:
                  cpu: 500m
                  memory: 512Mi
              queryFrontend:
                requests:
                  cpu: 50m
                  memory: 64Mi
                limits:
                  cpu: 200m
                  memory: 256Mi
              reverseProxy:
                limits:
                  cpu: 100m
                  memory: 32Mi
                requests:
                  cpu: 50m
                  memory: 16Mi
            persistence:
              ingester:
                size: 20Gi
              querier:
                size: 10Gi
              compactor:
                size: 10Gi
            autoscaling:
              ingester:
                enabled: false
                minReplicas: 1
                maxReplicas: 3
                targetCPUUtilizationPercentage: 80
                targetMemoryUtilizationPercentage: 80
              gateway:
                enabled: false
                minReplicas: 1
                maxReplicas: 3
                targetCPUUtilizationPercentage: 80
                targetMemoryUtilizationPercentage: 80
              querier:
                enabled: false
                minReplicas: 1
                maxReplicas: 3
                targetCPUUtilizationPercentage: 80
                targetMemoryUtilizationPercentage: 80
              distributor:
                enabled: false
                minReplicas: 1
                maxReplicas: 3
                targetCPUUtilizationPercentage: 80
                targetMemoryUtilizationPercentage: 80
              queryFrontend:
                enabled: false
                minReplicas: 1
                maxReplicas: 3
                targetCPUUtilizationPercentage: 80
                targetMemoryUtilizationPercentage: 80
            _rawValues: {}
          metrics-server:
            apiServer:
              create: true
            _rawValues: {}
          minio:
            enabled: false
            provisioning:
              enabled: true
            persistence:
              enabled: true
              size: 50Gi
            resources:
              requests:
                cpu: 500m
                memory: 128Mi
              limits:
                cpu: "1"
                memory: 1Gi
            _rawValues: {}
          oauth2-proxy:
            resources:
              limits:
                cpu: 200m
                memory: 128Mi
              requests:
                cpu: 20m
                memory: 32Mi
            _rawValues: {}
          oauth2-proxy-redis:
            architecture: standalone
            resources:
              master:
                requests:
                  cpu: 20m
                  memory: 16Mi
                limits:
                  cpu: 200m
                  memory: 128Mi
              replica:
                requests:
                  cpu: 200m
                  memory: 64Mi
                limits:
                  cpu: 500m
                  memory: 256Mi
              sentinel:
                requests:
                  cpu: 200m
                  memory: 64Mi
                limits:
                  cpu: 500m
                  memory: 256Mi
              metrics:
                requests:
                  cpu: 50m
                  memory: 64Mi
                limits:
                  cpu: 100m
                  memory: 256Mi
            persistence:
                master:
                  size: 1Gi
                sentinel:
                  size: 1Gi
                replica:
                  size: 1Gi
            _rawValues: {}
          otomi-api:
            editorInactivityTimeout: 1
            _rawValues: {}
            networkPolicies:
              enabled: true
            resources:
              api:
                limits:
                  cpu: 500m
                  memory: 512Mi
                requests:
                  cpu: 100m
                  memory: 256Mi
              tools:
                limits:
                  cpu: "1"
                  memory: 1Gi
                requests:
                  cpu: 300m
                  memory: 256Mi
          otomi-console:
            _rawValues: {}
            resources:
              limits:
                cpu: 400m
                memory: 256Mi
              requests:
                cpu: 50m
                memory: 128Mi
          otomi-operator:
            resources:
              operator:
                requests:
                  cpu: 100m
                  memory: 128Mi
                limits:
                  cpu: 200m
                  memory: 256Mi
            _rawValues: {}
          apl-harbor-operator:
            resources:
              operator:
                requests:
                  cpu: 50m
                  memory: 128Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
            _rawValues: {}
          apl-gitea-operator:
            resources:
              operator:
                requests:
                  cpu: 50m
                  memory: 128Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
            _rawValues: {}
          apl-operator:
            resources:
              operator:
                requests:
                  cpu: 250m
                  memory: 128Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
            _rawValues: {}
          apl-keycloak-operator:
            resources:
              operator:
                requests:
                  cpu: 50m
                  memory: 128Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
            _rawValues: {}
          promtail:
            enabled: false
            resources:
              requests:
                cpu: 50m
                memory: 160Mi
              limits:
                cpu: "1"
                memory: 1Gi
            _rawValues: {}
          prometheus-blackbox-exporter:
            _rawValues: {}
            resources:
              blackboxExporter:
                requests:
                  cpu: 50m
                  memory: 50Mi
                limits:
                  cpu: 250m
                  memory: 300Mi
              sentinel:
                requests:
                  cpu: 100m
                  memory: 32Mi
                limits:
                  cpu: 200m
                  memory: 128Mi
          prometheus:
            enabled: true
            disabledRules:
              - InfoInhibitor
            remoteWrite:
              enabled: false
              rwConfig:
                insecureSkipVerify: false
            replicas: 1
            scrapeInterval: 60s
            retention: 15d
            retentionSize: 4GB
            storageSize: 5Gi
            resources:
              prometheusOperator:
                limits:
                  cpu: 400m
                  memory: 256Mi
                requests:
                  cpu: 50m
                  memory: 128Mi
              prometheus:
                requests:
                  cpu: 100m
                  memory: 2Gi
                limits:
                  cpu: '3'
                  memory: 3Gi
              kube-state-metrics:
                requests:
                  cpu: 50m
                  memory: 128Mi
                limits:
                  cpu: 200m
                  memory: 256Mi
              node-exporter:
                requests:
                  cpu: 50m
                  memory: 32Mi
                limits:
                  cpu: 500m
                  memory: 256Mi
              thanosSidecar:
                requests:
                  cpu: 10m
                  memory: 64Mi
                limits:
                  cpu: "1"
                  memory: 512Mi
              prometheusConfigReloader:
                requests:
                  cpu: 10m
                  memory: 24Mi
                limits:
                  cpu: 100m
                  memory: 128Mi
            _rawValues: {}
          otel:
            enabled: false
            collector:
              mode: deployment
              autoscaler:
                minReplicas: 2
                maxReplicas: 5
                targetCPUUtilizationPercentage: 80
                targetMemoryUtilizationPercentage: 80
              attributes:
                - k8s.pod.name
                - k8s.pod.uid
                - k8s.deployment.name
                - k8s.namespace.name
                - k8s.node.name
                - k8s.pod.start_time
            operator:
              replicaCount: 1
            resources:
              collector:
                requests:
                  cpu: 50m
                  memory: 256Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              manager:
                requests:
                  cpu: 50m
                  memory: 64Mi
                limits:
                  cpu: 500m
                  memory: 512Mi
              kubeRBACProxy:
                requests:
                  cpu: 50m
                  memory: 32Mi
                limits:
                  cpu: 200m
                  memory: 128Mi
            _rawValues: {}
          sealed-secrets:
            resources:
              operator:
                requests:
                  cpu: 50m
                  memory: 64Mi
                limits:
                  cpu: "2"
                  memory: 1Gi
            _rawValues: {}
          tempo:
            enabled: false
            resources:
              compactor:
                requests:
                  cpu: 100m
                  memory: 128Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              ingester:
                requests:
                  cpu: 100m
                  memory: 768Mi
                limits:
                  cpu: 500m
                  memory: 2Gi
              memcached:
                requests:
                  cpu: 50m
                  memory: 128Mi
                limits:
                  cpu: 200m
                  memory: 512Mi
              querier:
                requests:
                  cpu: 50m
                  memory: 64Mi
                limits:
                  cpu: 200m
                  memory: 1Gi
              metricsGenerator:
                requests:
                  cpu: 50m
                  memory: 256Mi
                limits:
                  cpu: 200m
                  memory: 1Gi
              distributor:
                requests:
                  cpu: 50m
                  memory: 384Mi
                limits:
                  cpu: 200m
                  memory: 1Gi
              queryFrontend:
                requests:
                  cpu: 50m
                  memory: 128Mi
                limits:
                  cpu: 200m
                  memory: 512Mi
            persistence:
              ingester:
                size: 10Gi
            autoscaling:
              ingester:
                enabled: false
                minReplicas: 2
                maxReplicas: 3
                targetCPUUtilizationPercentage: 80
                targetMemoryUtilizationPercentage: 80
              querier:
                enabled: false
                minReplicas: 1
                maxReplicas: 3
                targetCPUUtilizationPercentage: 80
                targetMemoryUtilizationPercentage: 80
              distributor:
                enabled: false
                minReplicas: 1
                maxReplicas: 3
                targetCPUUtilizationPercentage: 80
                targetMemoryUtilizationPercentage: 80
              queryFrontend:
                enabled: false
                minReplicas: 1
                maxReplicas: 3
                targetCPUUtilizationPercentage: 80
                targetMemoryUtilizationPercentage: 80
            _rawValues: {}
          rabbitmq:
            enabled: false
            resources:
              clusterOperator:
                requests:
                  cpu: 100m
                  memory: 128Mi
                limits:
                  cpu: 900m
                  memory: 512Mi
              msgTopologyOperator:
                requests:
                  cpu: 100m
                  memory: 128Mi
                limits:
                  cpu: 900m
                  memory: 512Mi
            _rawValues: {}
          thanos:
            enabled: false
            query:
              replicaCount: 1
            compactor:
              retentionResolutionRaw: 30d
              retentionResolution5m: 30d
              retentionResolution1h: 10y
            persistence:
              compactor:
                size: 10Gi
              storegateway:
                size: 10Gi
            resources:
              query:
                requests:
                  cpu: 50m
                  memory: 160Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              compactor:
                requests:
                  cpu: 50m
                  memory: 128Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              storegateway:
                requests:
                  cpu: 50m
                  memory: 265Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
            _rawValues: {}
          trivy:
            enabled: false
            operator:
              replicaCount: 1
            resources:
              operator:
                requests:
                  cpu: 10m
                  memory: 512Mi
                limits:
                  cpu: "1"
                  memory: 1Gi
              trivy:
                requests:
                  cpu: 10m
                  memory: 128M
                limits:
                  cpu: "1"
                  memory: 1G
            _rawValues: {}
        databases:
          keycloak:
            imageName: null
            size: 5Gi
            walStorageSize: 5Gi
            replicas: 2
            recovery: {}
            externalClusters: []
            # Optimized memory based on actual workload: shared_buffers + work_mem * 2 * max_connections + overhead
            # Platform databases handle small datasets with low complexity queries (mainly PK lookups)
            # Memory calculation: 32MB (shared_buffers) + 2MB * 2 * 32 + 32MB (overhead) = 192Mi
            resources:
              limits:
                cpu: "200m"
                memory: 192Mi
              requests:
                cpu: "200m"
                memory: 192Mi
            backupSidecarResources:
              limits:
                cpu: "300m"
                memory: 128Mi
              requests:
                cpu: "50m"
                memory: 48Mi
            postgresqlParameters:
              max_connections: "32"
              shared_buffers: 64MB
              work_mem: 2MB
          harbor:
            imageName: null
            size: 5Gi
            walStorageSize: 5Gi
            replicas: 2
            coreDatabase: registry
            recovery: {}
            externalClusters: []
            # Optimized memory based on actual workload: shared_buffers + work_mem * 2 * max_connections + overhead
            # Platform databases handle small datasets with low complexity queries (mainly PK lookups)
            # Memory calculation: 32MB (shared_buffers) + 2MB * 2 * 32 + 32MB (overhead) = 192Mi
            resources:
              limits:
                cpu: "200m"
                memory: 192Mi
              requests:
                cpu: "200m"
                memory: 192Mi
            backupSidecarResources:
              limits:
                cpu: "300m"
                memory: 128Mi
              requests:
                cpu: "50m"
                memory: 48Mi
            postgresqlParameters:
              max_connections: "32"
              shared_buffers: 64MB
              work_mem: 2MB
          gitea:
            imageName: null
            size: 5Gi
            walStorageSize: 5Gi
            replicas: 2
            recovery: {}
            externalClusters: []
            # Optimized memory based on actual workload: shared_buffers + work_mem * 2 * max_connections + overhead
            # Platform databases handle small datasets with low complexity queries (mainly PK lookups)
            # Memory calculation: 32MB (shared_buffers) + 2MB * 2 * 32 + 32MB (overhead) = 192Mi
            resources:
              limits:
                cpu: "200m"
                memory: 192Mi
              requests:
                cpu: "200m"
                memory: 192Mi
            backupSidecarResources:
              limits:
                cpu: "300m"
                memory: 128Mi
              requests:
                cpu: "50m"
                memory: 48Mi
            postgresqlParameters:
              max_connections: "32"
              shared_buffers: 64MB
              work_mem: 2MB
        obj:
          provider:
            type: disabled
        platformBackups:
          database:
            harbor:
              enabled: false
              retentionPolicy: 7d
              schedule: 0 0 * * *
              pathSuffix: harbor
            gitea:
              enabled: false
              retentionPolicy: 7d
              schedule: 0 0 * * *
              pathSuffix: gitea
            keycloak:
              enabled: false
              retentionPolicy: 7d
              schedule: 0 0 * * *
              pathSuffix: keycloak
          gitea:
            enabled: false
            retentionPolicy: 7d
            schedule: 0 0 * * *
        cluster:
          provider: linode
          name: apl
          defaultStorageClass: ''
          linode:
            tier: standard
        dns:
          domainFilters: []
          zoneIdFilters: []
          policy: upsert-only
        ingress:
          platformClass:
            className: platform
          classes: []
        alerts:
          receivers:
            - none
        otomi:
          hasExternalDNS: false
          hasExternalIDP: false
          isMultitenant: true
          nodeSelector: {}
          isPreInstalled: false
          useORCS: true
          aiEnabled: false
        users: []
        # TODO: update this when schema version changes
        versions:
          specVersion: 45
